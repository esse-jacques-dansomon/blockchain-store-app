<div class="upload">
  <h2>add new Product</h2>
  <p *ngIf="formError" class="error">{{formError}}</p>
  <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()">
    <p>
      <mat-form-field appearance="fill">
        <mat-label>Product Name</mat-label>
        <input matInput formControlName="name">
      </mat-form-field>
    </p>

    <p>
      <mat-form-field appearance="fill">
        <mat-label>Product Price</mat-label>
        <input type="number" matInput formControlName="price">
      </mat-form-field>
    </p>


    <mat-form-field *ngIf="categories$ | async as categories">
      <mat-label>Categories</mat-label>
      <select matNativeControl required>
        <option value="" disabled selected>Select Category</option>

        <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
<!--        <option value="volvo">Volvo</option>-->
<!--        <option value="saab">Saab</option>-->
<!--        <option value="mercedes">Mercedes</option>-->
<!--        <option value="audi">Audi</option>-->
      </select>
    </mat-form-field>




    <p>
      <mat-form-field appearance="fill">
        <mat-label>Product Quantity</mat-label>
        <input  type="number" matInput formControlName="quantity">
      </mat-form-field>
    </p>

    <div class="upload__item">
      <div class="upload__category">Product</div>
      <div class="upload__file">
        <input class="upload__input" type="file" (change)="uploadImage($event.target)" />
        <div class="upload__format" *ngIf="!uploadedImage">
          PNG, GIF, WEBP. Max 1Gb.
        </div>
        <img *ngIf="uploadedImage" [src]="uploadedImage" alt="uploaded Product" class="upload__image" />
      </div>
    </div>

    <button mat-flat-button color="primary" type="submit" [disabled]="isLoading">
      <span *ngIf="!isLoading">Upload</span>
      <span *ngIf="isLoading">Loading...</span>
    </button>
  </form>
</div>
